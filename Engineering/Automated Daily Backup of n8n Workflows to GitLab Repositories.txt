================================================================================
WORKFLOW: Automated Daily Backup of n8n Workflows to GitLab Repositories
================================================================================

üìã BASIC INFORMATION
------------------------------
ID: 4035
Name: Automated Daily Backup of n8n Workflows to GitLab Repositories
Total Views: 542
Created At: 2025-05-14T06:06:07.562Z
Purchase URL: None

üë§ AUTHOR INFORMATION
------------------------------
Name: Akhil Varma Gadiraju
Username: akhilv7
Verified: ‚úÖ Yes
Bio: I'm a full stack developer passionate about building intelligent, scalable solutions that automate workflows and enhance productivity. I love working at the intersection of AI, APIs, and automation‚Äîusing tools like n8n to streamline processes, integrate data, and unlock smarter decision-making. Whether it's crafting custom backend services or designing intuitive frontends, I‚Äôm always exploring ways to build more with less manual effort.
Links: https://www.linkedin.com/in/akhilv7/

üìù DESCRIPTION
------------------------------
n8n Workflow: Sync Workflows with GitLab

How It Works

This workflow ensures that your self-hosted n8n workflows are version-controlled in a GitLab repository. It compares each current workflow from n8n with its stored counterpart in GitLab. If any differences are detected, the GitLab file is updated with the latest version.

Core Logic:
Retrieve Workflows ‚Äì Fetch all workflows from the n8n REST API.

Compare with GitLab ‚Äì For each workflow, fetch the corresponding file from GitLab and compare the JSON.

Update if Changed ‚Äì If differences exist, commit the updated workflow to GitLab using its API.

Setup

Before using the workflow, ensure the following:

Prerequisites:
n8n**: Self-hosted instance with access to the /rest/workflows API.

GitLab**: A repository where workflows will be stored, and a Personal Access Token (PAT) with api and write_repository permissions.

n8n Nodes Required**:
  HTTP Request (to call n8n and GitLab APIs)
  Code or Function nodes (for diffing and formatting)
  Looping (SplitInBatches or similar)

Configuration:
Set environment variables or workflow credentials for:
  GITLAB_TOKEN
  GITLAB_REPO
  GITLAB_BRANCH (e.g., main)
  GITLAB_FILE_PATH_PREFIX (e.g., n8n-workflows/)

How to Use

Import the Workflow into your n8n instance.

Configure GitLab API Credentials:
   Set the GitLab PAT as a header in the HTTP

Request node:  
     Private-Token: {{ $env.GITLAB_TOKEN }}

Map Workflows to GitLab Paths:
   Use the workflow name or ID to create the file path. Example:  
     n8n-workflows/workflow-name.json

Trigger the Workflow:
   Can be manually triggered, or scheduled to run at intervals (e.g., daily).
   
Review Commits in GitLab:
   Each updated workflow will be committed with a message like:  
     "Update workflow: Sample Workflow"

Disclaimer

This workflow does not handle merge conflicts or manual edits made directly in GitLab. Always ensure proper coordination if multiple sources are modifying workflows.
Only structural changes are tracked. Non-functional metadata (like timestamps or IDs) may trigger false positives unless filtered.
Use at your own risk. Test in a safe environment before applying to production workflows.

üîß NODES USED
------------------------------
‚Ä¢ GitLab - Categories: Development
‚Ä¢ Code - Categories: Core Nodes, Development

Total Nodes: 2

üìä RAW DATA (JSON)
------------------------------
{
  "id": 4035,
  "name": "Automated Daily Backup of n8n Workflows to GitLab Repositories",
  "totalViews": 542,
  "purchaseUrl": null,
  "user": {
    "id": 94502,
    "name": "Akhil Varma Gadiraju",
    "username": "akhilv7",
    "bio": "I'm a full stack developer passionate about building intelligent, scalable solutions that automate workflows and enhance productivity. I love working at the intersection of AI, APIs, and automation‚Äîusing tools like n8n to streamline processes, integrate data, and unlock smarter decision-making. Whether it's crafting custom backend services or designing intuitive frontends, I‚Äôm always exploring ways to build more with less manual effort.",
    "verified": true,
    "links": "[\"https://www.linkedin.com/in/akhilv7/\"]",
    "avatar": "https://gravatar.com/avatar/b99567eca941cecc3ec3ceeda2c0c561f619423a66ffd88825781966e0aef4e8?r=pg&d=retro&size=200"
  },
  "description": "n8n Workflow: Sync Workflows with GitLab\n\nHow It Works\n\nThis workflow ensures that your self-hosted n8n workflows are version-controlled in a GitLab repository. It compares each current workflow from n8n with its stored counterpart in GitLab. If any differences are detected, the GitLab file is updated with the latest version.\n\nCore Logic:\nRetrieve Workflows ‚Äì Fetch all workflows from the n8n REST API.\n\nCompare with GitLab ‚Äì For each workflow, fetch the corresponding file from GitLab and compare the JSON.\n\nUpdate if Changed ‚Äì If differences exist, commit the updated workflow to GitLab using its API.\n\nSetup\n\nBefore using the workflow, ensure the following:\n\nPrerequisites:\nn8n**: Self-hosted instance with access to the /rest/workflows API.\n\nGitLab**: A repository where workflows will be stored, and a Personal Access Token (PAT) with api and write_repository permissions.\n\nn8n Nodes Required**:\n  HTTP Request (to call n8n and GitLab APIs)\n  Code or Function nodes (for diffing and formatting)\n  Looping (SplitInBatches or similar)\n\nConfiguration:\nSet environment variables or workflow credentials for:\n  GITLAB_TOKEN\n  GITLAB_REPO\n  GITLAB_BRANCH (e.g., main)\n  GITLAB_FILE_PATH_PREFIX (e.g., n8n-workflows/)\n\nHow to Use\n\nImport the Workflow into your n8n instance.\n\nConfigure GitLab API Credentials:\n   Set the GitLab PAT as a header in the HTTP\n\nRequest node:  \n     Private-Token: {{ $env.GITLAB_TOKEN }}\n\nMap Workflows to GitLab Paths:\n   Use the workflow name or ID to create the file path. Example:  \n     n8n-workflows/workflow-name.json\n\nTrigger the Workflow:\n   Can be manually triggered, or scheduled to run at intervals (e.g., daily).\n   \nReview Commits in GitLab:\n   Each updated workflow will be committed with a message like:  \n     \"Update workflow: Sample Workflow\"\n\nDisclaimer\n\nThis workflow does not handle merge conflicts or manual edits made directly in GitLab. Always ensure proper coordination if multiple sources are modifying workflows.\nOnly structural changes are tracked. Non-functional metadata (like timestamps or IDs) may trigger false positives unless filtered.\nUse at your own risk. Test in a safe environment before applying to production workflows.\n\n",
  "createdAt": "2025-05-14T06:06:07.562Z",
  "nodes": [
    {
      "id": 56,
      "icon": "file:gitlab.svg",
      "name": "n8n-nodes-base.gitlab",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.gitlab/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/gitlab/"
              }
            ]
          },
          "categories": [
            "Development"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "GitLab"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGZpbGw9IiNFMjQzMjkiIGQ9Im0zMC41IDU2Ljk2NyAxMC44NjMtMzMuMjAzSDE5LjYzN3oiLz48cGF0aCBmaWxsPSIjRkM2RDI2IiBkPSJNMzAuNSA1Ni45NjcgMTkuNjM3IDIzLjc2NEg0LjQxeiIvPjxwYXRoIGZpbGw9IiNGQ0EzMjYiIGQ9Ik00LjQxIDIzLjc2NCAxLjExIDMzLjg2Yy0uMy45Mi4wMyAxLjkyOC44MTcgMi40OTZMMzAuNSA1Ni45Njd6Ii8+PHBhdGggZmlsbD0iI0UyNDMyOSIgZD0iTTQuNDEgMjMuNzY0aDE1LjIyNkwxMy4wOTMgMy43ODFjLS4zMzYtMS4wMjktMS44MDItMS4wMjktMi4xMzkgMHoiLz48cGF0aCBmaWxsPSIjRkM2RDI2IiBkPSJtMzAuNSA1Ni45NjcgMTAuODYzLTMzLjIwM0g1Ni41OXoiLz48cGF0aCBmaWxsPSIjRkNBMzI2IiBkPSJtNTYuNTkgMjMuNzY0IDMuMyAxMC4wODZhMi4yMiAyLjIyIDAgMCAxLS44MTcgMi40OTdMMzAuNSA1Ni45Njd6Ii8+PHBhdGggZmlsbD0iI0UyNDMyOSIgZD0iTTU2LjU5IDIzLjc2NEg0MS4zNjJsNi41NDQtMTkuOTkyYy4zMzYtMS4wMyAxLjgwMi0xLjAzIDIuMTM5IDBsNi41NDMgMTkuOTkyeiIvPjwvZz48L3N2Zz4="
      },
      "displayName": "GitLab",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        }
      ]
    },
    {
      "id": 834,
      "icon": "file:code.svg",
      "name": "n8n-nodes-base.code",
      "codex": {
        "data": {
          "alias": [
            "cpde",
            "Javascript",
            "JS",
            "Python",
            "Script",
            "Custom Code",
            "Function"
          ],
          "details": "The Code node allows you to execute JavaScript in your workflow.",
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Code"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Code",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    }
  ]
}